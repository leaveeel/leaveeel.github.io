import{U as b,o as V,N as P,$ as K,a as G,E as Z,K as H}from"./zc-ui-fD4wFx8p.js";import{Z as W,r as c,_ as X,d as Y,D as x,o as ee,j as g,f as S,h as d,m as te,g as f,u as n,C as Q,F as $,s as T,n as ae,q as p,v as j,k as I,N as le}from"./vendor-l-IbMezD.js";import{_ as se}from"./plugin-vueexport-helper-DlAUqK2U.js";const ne=W("requestId",()=>{const t=c(1);return{requestId:t,setRequestId:()=>{t.value++}}}),R=X.create({timeout:6e4});R.interceptors.request.use(t=>{switch(t.method){case"post":t?.data?.params&&(t.url=`${t.url}?${Object.entries(t.data.params).map(([l,i])=>`${l}=${i}`).join("&")}`,delete t.data.params);break}return t},t=>Promise.reject(t));R.interceptors.response.use(t=>{if(t.config.requestId&&t.config.requestId!==ne().requestId)return Promise.reject("break");switch(t.status){case 200:return t.data.code===0||!t.data.code?t:(!t.config.notoast&&t.data.msg&&b.error(t.data.msg),Promise.reject(t));default:return t.config.notoast||b.error(t.data.msg),Promise.reject(t)}},t=>(t.config.notoast||b.error(t?.data?.msg||"Request Error"),Promise.reject(t)));const w=t=>R.get(t),O=t=>{const l=[...t];for(let i=l.length-1;i>0;i--){const _=Math.floor(Math.random()*(i+1));[l[i],l[_]]=[l[_],l[i]]}return l},oe={key:0,class:"check-ask"},ie={class:"check"},re=["onClick"],ue=["onClick"],ce=Y({__name:"checkAsk",setup(t){const l=x({field1:50,field2:7}),i=s=>{l[s]=Math.floor(l[s])},_=()=>{H({message:"Submit will reset the selection with total "+l.field1+", column "+l.field2+". Continue to submit?",confirmText:"Submit"}).then(()=>{A()})},A=()=>{y.value=null,C.value=[],q.value=l.field2,localStorage.removeItem("checkSequence"),localStorage.removeItem("question"),L(),J(),m.value=[],localStorage.setItem("formModel",l.field1+","+l.field2),B(l.field1,l.field2)},B=(s,e)=>{const a=Math.ceil(s/e),o=Array.from({length:a},(r,u)=>Array.from({length:e},(k,F)=>{if(u*e+F<s)return[!1,!1]}).filter(k=>k));m.value.length&&m.value.forEach(([r,u,k])=>{o[r]&&o[r][u]&&(o[r][u][k]=!0)}),h.value=o},q=c(l.field2),m=c([]),v=c([]),M=c([]),L=()=>{w("/Question.txt").then(s=>{let e=s.data.split(`
`).map(a=>a.trim()).filter(a=>a);v.value=[O(e),O(e)],localStorage.setItem("question",JSON.stringify(v.value))})},J=()=>{w("/Match.txt").then(s=>{let e=s.data.split(`
`).map(a=>a.trim()).filter(a=>a);M.value=O(e)})};ee(()=>{const s=localStorage.getItem("formModel"),e=localStorage.getItem("checkSequence"),a=localStorage.getItem("question");if(J(),s){const[o,r]=s.split(",").map(Number);l.field1=o,l.field2=r,q.value=r,e&&(m.value=JSON.parse(e)),a&&(v.value=JSON.parse(a)),B(l.field1,l.field2)}else A()});const h=c(),C=c([]),y=c(null),U=(s,e,a)=>{if(JSON.stringify(m.value.slice(-1)[0])===JSON.stringify([s,e,a]))h.value[s][e][a]=!1,m.value.pop(),y.value=a===0?1:0;else if(!h.value[s][e][a]){if(y.value!==null&&y.value===a){b.warning(" the question in the different group.");return}y.value=a;const o=D(a,s*q.value+e);o&&(h.value[s][e][a]=!0,m.value.push([s,e,a]),N.value=!0,C.value=o)}localStorage.setItem("checkSequence",JSON.stringify(m.value))},z=()=>{let s=M.value.length;return s===0?"":M.value[Math.floor(Math.random()*s)]},D=(s,e)=>e>=v.value[s].length?(b.warning(`Insufficient: ${e+1} / ${v.value[s].length}`,{duration:5e3}),!1):[z(),v.value[s][e]],N=c(!1),E=s=>{s.currentTarget.classList.add("is-clear")};return(s,e)=>(S(),g($,null,[d(n(G),{class:"setting",model:n(l),inline:"",onSubmit:_},{default:f(()=>[d(n(V),{label:"Total"},{default:f(()=>[d(n(P),{modelValue:n(l).field1,"onUpdate:modelValue":e[0]||(e[0]=a=>n(l).field1=a),type:"number",min:1,onBlur:e[1]||(e[1]=a=>i("field1"))},null,8,["modelValue"])]),_:1}),d(n(V),{label:"Column"},{default:f(()=>[d(n(P),{modelValue:n(l).field2,"onUpdate:modelValue":e[2]||(e[2]=a=>n(l).field2=a),type:"number",min:1,onBlur:e[3]||(e[3]=a=>i("field2"))},null,8,["modelValue"])]),_:1}),d(n(V),null,{default:f(()=>[d(n(K),{type:"primary",htmlType:"submit"},{default:f(()=>[...e[5]||(e[5]=[Q("Reset",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),n(h)?(S(),g("div",oe,[(S(!0),g($,null,T(n(h),(a,o)=>(S(),g("div",{class:"ask-row",key:o,style:ae({"--column-count":n(q)})},[(S(!0),g($,null,T(a,(r,u)=>(S(),g("div",{class:"ask-item",key:u},[p("span",null,j(o*n(q)+u+1),1),p("div",ie,[p("div",{class:I(["check-item",{check:r[0]}]),onClick:k=>U(o,u,0)},null,10,re),p("div",{class:I(["check-item",{check:r[1]}]),onClick:k=>U(o,u,1)},null,10,ue)])]))),128))],4))),128))])):te("",!0),d(n(Z),{modelValue:n(N),"onUpdate:modelValue":e[4]||(e[4]=a=>le(N)?N.value=a:null),"close-on-click-modal":!1,closeIcon:""},{header:f(()=>[...e[6]||(e[6]=[Q("Question",-1)])]),default:f(()=>[p("p",{class:"blurry",onClick:E},j(n(C)[0]),1),p("p",{class:"blurry",onClick:E},j(n(C)[1]),1)]),_:1},8,["modelValue"])],64))}}),he=se(ce,[["__scopeId","data-v-beade67b"]]);export{he as default};
