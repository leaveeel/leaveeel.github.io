import{U as b,o as C,N as B,$ as z,a as D,E as F,K}from"./zc-ui-fD4wFx8p.js";import{Z as L,r as m,_ as Z,d as G,D as H,o as W,j as k,f as g,h as c,m as X,g as d,u as o,C as U,F as N,s as E,n as Y,q as p,v as $,k as O,N as x}from"./vendor-l-IbMezD.js";import{_ as ee}from"./plugin-vueexport-helper-DlAUqK2U.js";const te=L("requestId",()=>{const e=m(1);return{requestId:e,setRequestId:()=>{e.value++}}}),j=Z.create({timeout:6e4});j.interceptors.request.use(e=>{switch(e.method){case"post":e?.data?.params&&(e.url=`${e.url}?${Object.entries(e.data.params).map(([l,n])=>`${l}=${n}`).join("&")}`,delete e.data.params);break}return e},e=>Promise.reject(e));j.interceptors.response.use(e=>{if(e.config.requestId&&e.config.requestId!==te().requestId)return Promise.reject("break");switch(e.status){case 200:return e.data.code===0||!e.data.code?e:(!e.config.notoast&&e.data.msg&&b.error(e.data.msg),Promise.reject(e));default:return e.config.notoast||b.error(e.data.msg),Promise.reject(e)}},e=>(e.config.notoast||b.error(e?.data?.msg||"Request Error"),Promise.reject(e)));const P=e=>j.get(e),T=e=>{const l=[...e];for(let n=l.length-1;n>0;n--){const q=Math.floor(Math.random()*(n+1));[l[n],l[q]]=[l[q],l[n]]}return l},le={key:0,class:"check-ask"},ae={class:"check"},se=["onClick"],oe=["onClick"],re=G({__name:"checkAsk",setup(e){const l=H({field1:50,field2:7}),n=a=>{l[a]=Math.floor(l[a])},q=()=>{K({message:"Submit will reset the selection with total "+l.field1+", column "+l.field2+". Continue to submit?",confirmText:"Submit"}).then(()=>{S.value=l.field2,localStorage.removeItem("checkSequence"),u.value=[],localStorage.setItem("formModel",l.field1+","+l.field2),R(l.field1,l.field2)})},R=(a,t)=>{const s=Math.ceil(a/t),r=Array.from({length:s},(f,i)=>Array.from({length:t},(h,w)=>{if(i*t+w<a)return[!1,!1]}).filter(h=>h));u.value.length&&u.value.forEach(([f,i,h])=>{r[f]&&r[f][i]&&(r[f][i][h]=!0)}),v.value=r},S=m(l.field2),u=m([]),_=m([]),M=m([]),J=()=>{P("/Question.txt").then(a=>{let t=a.data.split(`
`).map(s=>s.trim()).filter(s=>s);_.value=T(t)}),P("/Match.txt").then(a=>{let t=a.data.split(`
`).map(s=>s.trim()).filter(s=>s);M.value=T(t)})};W(()=>{const a=localStorage.getItem("formModel"),t=localStorage.getItem("checkSequence");if(J(),a){const[s,r]=a.split(",").map(Number);l.field1=s,l.field2=r,S.value=r,t&&(u.value=JSON.parse(t))}else localStorage.removeItem("checkSequence"),localStorage.setItem("formModel",l.field1+","+l.field2);R(l.field1,l.field2)});const v=m(),V=m([]),A=(a,t,s)=>{if(JSON.stringify(u.value.slice(-1)[0])===JSON.stringify([a,t,s]))v.value[a][t][s]=!1,u.value.pop();else if(!v.value[a][t][s]){const r=Q(a*S.value+t);r&&(v.value[a][t][s]=!0,u.value.push([a,t,s]),y.value=!0,V.value=r)}localStorage.setItem("checkSequence",JSON.stringify(u.value))},I=()=>{let a=M.value.length;return a===0?"":M.value[Math.floor(Math.random()*a)]},Q=a=>a>=_.value.length?(b.warning(`Insufficient: ${a} / ${_.value.length}`,{duration:5e3}),!1):[I(),_.value[a]],y=m(!1);return(a,t)=>(g(),k(N,null,[c(o(D),{class:"setting",model:o(l),inline:"",onSubmit:q},{default:d(()=>[c(o(C),{label:"Total"},{default:d(()=>[c(o(B),{modelValue:o(l).field1,"onUpdate:modelValue":t[0]||(t[0]=s=>o(l).field1=s),type:"number",min:1,onBlur:t[1]||(t[1]=s=>n("field1"))},null,8,["modelValue"])]),_:1}),c(o(C),{label:"Column"},{default:d(()=>[c(o(B),{modelValue:o(l).field2,"onUpdate:modelValue":t[2]||(t[2]=s=>o(l).field2=s),type:"number",min:1,onBlur:t[3]||(t[3]=s=>n("field2"))},null,8,["modelValue"])]),_:1}),c(o(C),null,{default:d(()=>[c(o(z),{type:"primary",htmlType:"submit"},{default:d(()=>[...t[5]||(t[5]=[U("Reset",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),o(v)?(g(),k("div",le,[(g(!0),k(N,null,E(o(v),(s,r)=>(g(),k("div",{class:"ask-row",key:r,style:Y({"--column-count":o(S)})},[(g(!0),k(N,null,E(s,(f,i)=>(g(),k("div",{class:"ask-item",key:i},[p("span",null,$(r*o(S)+i+1),1),p("div",ae,[p("div",{class:O(["check-item",{check:f[0]}]),onClick:h=>A(r,i,0)},null,10,se),p("div",{class:O(["check-item",{check:f[1]}]),onClick:h=>A(r,i,1)},null,10,oe)])]))),128))],4))),128))])):X("",!0),c(o(F),{modelValue:o(y),"onUpdate:modelValue":t[4]||(t[4]=s=>x(y)?y.value=s:null),"close-on-click-modal":!1,closeIcon:""},{header:d(()=>[...t[6]||(t[6]=[U("Question",-1)])]),default:d(()=>[p("p",null,$(o(V)[0]),1),p("p",null,$(o(V)[1]),1)]),_:1},8,["modelValue"])],64))}}),me=ee(re,[["__scopeId","data-v-0f116238"]]);export{me as default};
