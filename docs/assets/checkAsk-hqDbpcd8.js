import{U as b,o as C,N as U,$ as z,a as D,E as F,K}from"./zc-ui-fD4wFx8p.js";import{Z as L,r as m,_ as Z,d as G,D as H,o as W,j as k,f as S,h as c,m as X,g as d,u as o,C as E,F as N,s as O,n as Y,q as g,v as $,k as P,N as x}from"./vendor-l-IbMezD.js";import{_ as ee}from"./plugin-vueexport-helper-DlAUqK2U.js";const te=L("requestId",()=>{const t=m(1);return{requestId:t,setRequestId:()=>{t.value++}}}),R=Z.create({timeout:6e4});R.interceptors.request.use(t=>{switch(t.method){case"post":t?.data?.params&&(t.url=`${t.url}?${Object.entries(t.data.params).map(([l,r])=>`${l}=${r}`).join("&")}`,delete t.data.params);break}return t},t=>Promise.reject(t));R.interceptors.response.use(t=>{if(t.config.requestId&&t.config.requestId!==te().requestId)return Promise.reject("break");switch(t.status){case 200:return t.data.code===0||!t.data.code?t:(!t.config.notoast&&t.data.msg&&b.error(t.data.msg),Promise.reject(t));default:return t.config.notoast||b.error(t.data.msg),Promise.reject(t)}},t=>(t.config.notoast||b.error(t?.data?.msg||"Request Error"),Promise.reject(t)));const T=t=>R.get(t),j=t=>{const l=[...t];for(let r=l.length-1;r>0;r--){const q=Math.floor(Math.random()*(r+1));[l[r],l[q]]=[l[q],l[r]]}return l},le={key:0,class:"check-ask"},ae={class:"check"},se=["onClick"],oe=["onClick"],ne=G({__name:"checkAsk",setup(t){const l=H({field1:50,field2:7}),r=s=>{l[s]=Math.floor(l[s])},q=()=>{K({message:"Submit will reset the selection with total "+l.field1+", column "+l.field2+". Continue to submit?",confirmText:"Submit"}).then(()=>{p.value=l.field2,localStorage.removeItem("checkSequence"),u.value=[],localStorage.setItem("formModel",l.field1+","+l.field2),A(l.field1,l.field2)})},A=(s,e)=>{const a=Math.ceil(s/e),n=Array.from({length:a},(f,i)=>Array.from({length:e},(h,w)=>{if(i*e+w<s)return[!1,!1]}).filter(h=>h));u.value.length&&u.value.forEach(([f,i,h])=>{n[f]&&n[f][i]&&(n[f][i][h]=!0)}),v.value=n},p=m(l.field2),u=m([]),_=m([]),M=m([]),J=()=>{T("/Question.txt").then(s=>{let e=s.data.split(`
`).map(a=>a.trim()).filter(a=>a);_.value=[j(e),j(e)]}),T("/Match.txt").then(s=>{let e=s.data.split(`
`).map(a=>a.trim()).filter(a=>a);M.value=j(e)})};W(()=>{const s=localStorage.getItem("formModel"),e=localStorage.getItem("checkSequence");if(J(),s){const[a,n]=s.split(",").map(Number);l.field1=a,l.field2=n,p.value=n,e&&(u.value=JSON.parse(e))}else localStorage.removeItem("checkSequence"),localStorage.setItem("formModel",l.field1+","+l.field2);A(l.field1,l.field2)});const v=m(),V=m([]),B=(s,e,a)=>{if(JSON.stringify(u.value.slice(-1)[0])===JSON.stringify([s,e,a]))v.value[s][e][a]=!1,u.value.pop();else if(!v.value[s][e][a]){const n=Q(a,s*p.value+e);n&&(v.value[s][e][a]=!0,u.value.push([s,e,a]),y.value=!0,V.value=n)}localStorage.setItem("checkSequence",JSON.stringify(u.value))},I=()=>{let s=M.value.length;return s===0?"":M.value[Math.floor(Math.random()*s)]},Q=(s,e)=>e>=_.value[s].length?(b.warning(`Insufficient: ${e+1} / ${_.value[s].length}`,{duration:5e3}),!1):[I(),_.value[s][e]],y=m(!1);return(s,e)=>(S(),k(N,null,[c(o(D),{class:"setting",model:o(l),inline:"",onSubmit:q},{default:d(()=>[c(o(C),{label:"Total"},{default:d(()=>[c(o(U),{modelValue:o(l).field1,"onUpdate:modelValue":e[0]||(e[0]=a=>o(l).field1=a),type:"number",min:1,onBlur:e[1]||(e[1]=a=>r("field1"))},null,8,["modelValue"])]),_:1}),c(o(C),{label:"Column"},{default:d(()=>[c(o(U),{modelValue:o(l).field2,"onUpdate:modelValue":e[2]||(e[2]=a=>o(l).field2=a),type:"number",min:1,onBlur:e[3]||(e[3]=a=>r("field2"))},null,8,["modelValue"])]),_:1}),c(o(C),null,{default:d(()=>[c(o(z),{type:"primary",htmlType:"submit"},{default:d(()=>[...e[5]||(e[5]=[E("Reset",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),o(v)?(S(),k("div",le,[(S(!0),k(N,null,O(o(v),(a,n)=>(S(),k("div",{class:"ask-row",key:n,style:Y({"--column-count":o(p)})},[(S(!0),k(N,null,O(a,(f,i)=>(S(),k("div",{class:"ask-item",key:i},[g("span",null,$(n*o(p)+i+1),1),g("div",ae,[g("div",{class:P(["check-item",{check:f[0]}]),onClick:h=>B(n,i,0)},null,10,se),g("div",{class:P(["check-item",{check:f[1]}]),onClick:h=>B(n,i,1)},null,10,oe)])]))),128))],4))),128))])):X("",!0),c(o(F),{modelValue:o(y),"onUpdate:modelValue":e[4]||(e[4]=a=>x(y)?y.value=a:null),"close-on-click-modal":!1,closeIcon:""},{header:d(()=>[...e[6]||(e[6]=[E("Question",-1)])]),default:d(()=>[g("p",null,$(o(V)[0]),1),g("p",null,$(o(V)[1]),1)]),_:1},8,["modelValue"])],64))}}),me=ee(ne,[["__scopeId","data-v-f28a5399"]]);export{me as default};
